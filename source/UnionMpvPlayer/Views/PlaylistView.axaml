<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:local="clr-namespace:UnionMpvPlayer.Views"
             x:Class="UnionMpvPlayer.Views.PlaylistView"
             x:DataType="local:PlaylistView">

	<Grid x:Name="PlaylistPanel" 
		  Background="{DynamicResource SystemRegionColor}"
		  DragDrop.AllowDrop="True">
		<Grid.RowDefinitions>
			<RowDefinition Height="Auto"/>
			<RowDefinition Height="*"/>
			<RowDefinition Height="Auto"/>
		</Grid.RowDefinitions>

		<!-- Playlist Header -->
		<Grid Grid.Row="0" Height="35">
			<Grid.ColumnDefinitions>
				<ColumnDefinition Width="*"/>
				<ColumnDefinition Width="Auto"/>
			</Grid.ColumnDefinitions>

			<TextBlock Text="Playlist"
                     VerticalAlignment="Center"
                     Margin="10,0,0,0"
					 FontSize="12"
                     Foreground="{DynamicResource SystemBaseMediumLowColor}"/>

			<StackPanel Grid.Column="1"
                      Orientation="Horizontal"
                      HorizontalAlignment="Right">
				<Button x:Name="TogglePlaylistModeButton"
                        Cursor="Hand"
                        Padding="8,8"
						Margin="0,0,5,0"
                        Background="Transparent"
                        ToolTip.Tip="Toggle Playlist Mode">
                    <Path Data="{DynamicResource checkmark_circle_regular}"
                          Fill="{DynamicResource SystemBaseHighColor}"
                          Width="14" Height="14"
                          Stretch="Uniform"/>
                </Button>
				<Button x:Name="ClearPlaylistButton"
						Cursor="Hand"
                        Padding="8,8"
						Background="Transparent"
                        ToolTip.Tip="Clear Playlist">
					<Path Data="{DynamicResource delete_regular}"
                          Fill="{DynamicResource SystemBaseHighColor}"
                          Width="14" Height="14"
                          Stretch="Uniform"/>
				</Button>
				<Button x:Name="AddToPlaylistButton"
                        Padding="8,8"
						Cursor="Hand"
						Background="Transparent"
                        ToolTip.Tip="Add Files">
					<Path Data="{DynamicResource add_regular}"
                          Fill="{DynamicResource SystemBaseHighColor}"
                          Width="14" Height="14"
                          Stretch="Uniform"/>
				</Button>
			</StackPanel>
		</Grid>

		<!-- Playlist Content -->
		<ListBox Grid.Row="1"
				x:Name="PlaylistListBox"
				Background="Transparent"
				BorderThickness="0,0,0,0"
				BorderBrush="{DynamicResource SystemChromeMediumLowColor}"
				Margin="0,0,0,36">
			<ListBox.Styles>
				<!-- Base Style -->
				<Style Selector="ListBoxItem">
					<Setter Property="Padding" Value="10"/>
					<Setter Property="Cursor" Value="Hand"/>
				</Style>

				<!-- Hover State -->
				<Style Selector="ListBoxItem:pointerover /template/ ContentPresenter">
					<Setter Property="Background" Value="{DynamicResource SystemChromeLowColor}" />
				</Style>

				<!-- Selected State -->
				<Style Selector="ListBoxItem:selected /template/ ContentPresenter">
					<Setter Property="Background" Value="{DynamicResource SystemChromeMediumLowColor}" />
				</Style>
			</ListBox.Styles>

			<ListBox.ItemTemplate>
				<DataTemplate DataType="{x:Type local:PlaylistItem}">
					<Border BorderThickness="1">
						<Grid VerticalAlignment="Center">
							<Grid.ColumnDefinitions>
								<ColumnDefinition Width="Auto"/>
								<ColumnDefinition Width="*"/>
							</Grid.ColumnDefinitions>

							<!-- Playing indicator -->
							<Path Data="{Binding PlayingIconData}"
								  Fill="{DynamicResource SystemBaseHighColor}"
								  Width="14" Height="14"
								  Margin="10,0,1,0"
								  IsVisible="{Binding IsPlaying}"
								  VerticalAlignment="Center"
								  Stretch="Uniform"/>

							<!-- Filename -->
							<TextBlock Grid.Column="1"
									   FontSize="12"
									   Text="{Binding DisplayName}"
									   Padding="10,2"
									   VerticalAlignment="Center"/>
						</Grid>
					</Border>
				</DataTemplate>
			</ListBox.ItemTemplate>
		</ListBox>

		<!-- Playlist Controls -->
		<Grid Grid.Row="2">
			<Grid.RowDefinitions>
				<RowDefinition Height="Auto"/>
				<RowDefinition Height="Auto"/>
			</Grid.RowDefinitions>

			<TextBlock x:Name="PlaylistInstructions"
					  Grid.Row="0"
					  FontSize="12"
					  Text="To start playback, double-click on a video."
					  Padding="10,11"
					  Margin="0,0,0,15"
					  Foreground="{DynamicResource SystemBaseMediumLowColor}"
					  VerticalAlignment="Center" HorizontalAlignment="Center"/>
			
			<StackPanel Grid.Row="1"
						Orientation="Horizontal"
						HorizontalAlignment="Center"
						Margin="0,0,0,13">
				<Button x:Name="MoveUpButton"
						Background="Transparent"
						Cursor="Hand"
						Margin="5,0"
						Padding="8,8"
						ToolTip.Tip="Move Up">
					<Path Data="{DynamicResource arrow_up_regular}"
						  Fill="{DynamicResource SystemBaseHighColor}"
						  Width="13" Height="13"
						  Stretch="Uniform"/>
				</Button>
				<Button x:Name="MoveDownButton"
						Background="Transparent"
						Cursor="Hand"
						Margin="5,0"
						Padding="8,8"
						ToolTip.Tip="Move Down">
					<Path Data="{DynamicResource arrow_down_regular}"
						  Fill="{DynamicResource SystemBaseHighColor}"
						  Width="13" Height="13"
						  Stretch="Uniform"/>
				</Button>
				<Button x:Name="RemoveFromPlaylistButton"
						Background="Transparent"
						Cursor="Hand"
						Margin="5,0"
						Padding="8,8"
						ToolTip.Tip="Remove">
					<Path Data="{DynamicResource dismiss_regular}"
						  Fill="{DynamicResource SystemBaseHighColor}"
						  Width="13" Height="13"
						  Stretch="Uniform"/>
				</Button>
				<Button x:Name="BackwardSpotButton"
						Background="Transparent"
						Cursor="Hand"
						Margin="5,0"
						Padding="8,8"
						HorizontalContentAlignment="Center"
						ToolTip.Tip="Previous Video">
					<Path Data="{DynamicResource arrow_previous_regular}"
						  Fill="{DynamicResource SystemBaseHighColor}"
						  Width="13" Height="13"
						  Stretch="Uniform"/>
				</Button>
				<Button x:Name="ForwardSpotButton"
						Background="Transparent"
						Cursor="Hand"
						Margin="4,0"
						Padding="8,8"
						HorizontalContentAlignment="Center"
						ToolTip.Tip="Next Video">
					<Path Data="{DynamicResource arrow_next_regular}"
						  Fill="{DynamicResource SystemBaseHighColor}"
						  Width="13" Height="13"
						  Stretch="Uniform"/>
				</Button>
			</StackPanel>
		</Grid>

		<!-- Resize Grip -->
		<GridSplitter Grid.Row="0"
                     Grid.RowSpan="3"
                     Width="4"
                     HorizontalAlignment="Right"
                     Background="Transparent"
                     Cursor="SizeWestEast"
					 IsVisible="False"/>
	</Grid>
</UserControl>